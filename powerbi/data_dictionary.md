# Data Dictionary - ETL Dashboard

This document provides a comprehensive description of all tables and columns generated by the ETL Dashboard.

## Table of Contents
- [Overview](#overview)
- [Table Relationships](#table-relationships)
- [Table Definitions](#table-definitions)
  - [masterbom_clean](#masterbom_clean)
  - [plant_item_status](#plant_item_status)
  - [fact_parts](#fact_parts)
  - [status_clean](#status_clean)
  - [dim_dates](#dim_dates)

## Overview

The ETL Dashboard processes Excel workbooks containing MasterBOM and Status sheets, producing normalized, Power BI-ready tables. The output includes:

- **5 main tables** with clean, structured data
- **Multiple formats**: CSV, Parquet, and SQLite
- **Date intelligence** with derived date features
- **Normalized structure** optimized for analytics

## Table Relationships

```
fact_parts (1) ←→ (M) plant_item_status
    ↓
masterbom_clean (M) → (1) fact_parts
    ↓
dim_dates (1) ←→ (M) [Date Columns]
```

**Primary Keys:**
- `fact_parts`: `part_id_std`
- `plant_item_status`: `part_id_std` + `project_plant`
- `dim_dates`: `date` + `role`

## Table Definitions

### masterbom_clean

**Description:** Cleaned and processed MasterBOM data with standardized part IDs and date features.

**Row Count:** Variable (depends on source data)
**Primary Key:** `part_id_std` (with potential duplicates)

| Column | Type | Description | Example |
|--------|------|-------------|---------|
| `part_id_std` | Text | Standardized part ID (cleaned, uppercase) | "7009-6933" |
| `part_id_raw` | Text | Original part ID from source | "7009-6933 " |
| `YAZAKI PN` | Text | Original YAZAKI part number column | "7009-6933" |
| `Item Description` | Text | Part description (title case) | "Wire Harness Assembly" |
| `Supplier Name` | Text | Primary supplier name (title case) | "Yazaki Corporation" |
| `Supplier PN` | Text | Supplier part number | "YZ-12345" |
| `Original Supplier Name` | Text | Original supplier name | "Original Corp" |
| `Original Supplier PN` | Text | Original supplier part number | "OC-67890" |
| `Customer PN` | Text | Customer part number | "CUST-ABC123" |
| `PSW` | Text | Part Submission Warrant status | "OK", "NG", "" |
| `PSW Type` | Text | PSW type classification | "Type A" |
| `PSW Sub Type` | Text | PSW sub-type classification | "Sub-1" |
| `Approved Date` | Text | Original approved date string | "2024-01-15" |
| `Approved Date_date` | Date | Parsed approved date | 2024-01-15 |
| `Approved Date_year` | Integer | Year from approved date | 2024 |
| `Approved Date_month` | Integer | Month from approved date | 1 |
| `Approved Date_day` | Integer | Day from approved date | 15 |
| `Approved Date_qtr` | Integer | Quarter from approved date | 1 |
| `Approved Date_week` | Integer | ISO week from approved date | 3 |
| `PSW Date OK` | Text | Original PSW OK date string | "2024-01-10" |
| `PSW Date OK_date` | Date | Parsed PSW OK date | 2024-01-10 |
| `PSW Date OK_year` | Integer | Year from PSW OK date | 2024 |
| `PSW Date OK_month` | Integer | Month from PSW OK date | 1 |
| `PSW Date OK_day` | Integer | Day from PSW OK date | 10 |
| `PSW Date OK_qtr` | Integer | Quarter from PSW OK date | 1 |
| `PSW Date OK_week` | Integer | ISO week from PSW OK date | 2 |
| `Part Specification` | Text | Technical specification | "12V, 2.5mm²" |
| `Plant FAR` | Text | First Article Report status | "OK" |
| `YPN Status` | Text | YAZAKI part number status | "Active" |
| `Handling Manual` | Text | Handling manual availability | "Available" |
| `Customer Engineering Approval` | Text | Customer approval status | "Approved" |
| `IMDS STATUS (Yes, No, N/A)` | Text | IMDS compliance status | "Yes" |
| `IMDS REMARKS` | Text | IMDS remarks/comments | "Compliant" |
| `FAR Status` | Text | FAR status | "OK" |
| `FAR Promised date` | Text | FAR promised date | "2024-02-01" |
| `PPAP Details` | Text | PPAP process details | "Level 3" |
| `[Project Columns]` | Text | Dynamic project/plant columns | "X", "D", "0", "" |

### plant_item_status

**Description:** Normalized long table showing part status across all projects/plants.

**Row Count:** `[Number of Parts] × [Number of Projects/Plants]`
**Primary Key:** `part_id_std` + `project_plant`

| Column | Type | Description | Example |
|--------|------|-------------|---------|
| `part_id_std` | Text | Standardized part ID | "7009-6933" |
| `part_id_raw` | Text | Original part ID | "7009-6933 " |
| `project_plant` | Text | Project/plant identifier | "BX726_BEV_JOB1+90_YMOK" |
| `raw_status` | Text | Original status value from Excel | "X", "D", "0", "" |
| `status_class` | Text | Classified status | "active", "inactive", "new", "duplicate" |
| `is_duplicate` | Boolean | Whether part is marked as duplicate | TRUE/FALSE |
| `is_new` | Boolean | Whether part is new to project/plant | TRUE/FALSE |
| `notes` | Text | Additional notes/comments | NULL |
| `n_active` | Integer | Count of active plants for this part | 5 |
| `n_inactive` | Integer | Count of inactive plants for this part | 2 |
| `n_new` | Integer | Count of new plants for this part | 1 |
| `n_duplicate` | Integer | Count of duplicate plants for this part | 0 |

**Status Classification Rules:**
- `"X"` → `"active"` (part is active in project/plant)
- `"D"` → `"inactive"` (part no longer active)
- `"0"` → `"duplicate"` (if true duplicates exist) or `"new"` (if no duplicates)
- `""` or `NULL` → `"new"` (new item in project/plant)

### fact_parts

**Description:** One row per unique part with core attributes and quality flags.

**Row Count:** Number of unique parts
**Primary Key:** `part_id_std`

| Column | Type | Description | Example |
|--------|------|-------------|---------|
| `part_id_std` | Text | Standardized part ID (primary key) | "7009-6933" |
| `part_id_raw` | Text | Original part ID | "7009-6933 " |
| `Item Description` | Text | Part description | "Wire Harness Assembly" |
| `Supplier Name` | Text | Primary supplier name | "Yazaki Corporation" |
| `Supplier PN` | Text | Supplier part number | "YZ-12345" |
| `PSW` | Text | PSW status | "OK" |
| `PSW Type` | Text | PSW type | "Type A" |
| `PSW Sub Type` | Text | PSW sub-type | "Sub-1" |
| `YPN Status` | Text | YAZAKI part number status | "Active" |
| `Handling Manual` | Text | Handling manual status | "Available" |
| `IMDS STATUS (Yes, No, N/A)` | Text | IMDS status | "Yes" |
| `FAR Status` | Text | FAR status | "OK" |
| `PPAP Details` | Text | PPAP details | "Level 3" |
| `psw_ok` | Boolean | Whether PSW is OK | TRUE/FALSE |
| `has_handling_manual` | Boolean | Whether handling manual exists | TRUE/FALSE |
| `far_ok` | Boolean | Whether FAR status is OK | TRUE/FALSE |
| `imds_ok` | Boolean | Whether IMDS status is OK | TRUE/FALSE |

### status_clean

**Description:** Cleaned status/project summary data with standardized headers and values.

**Row Count:** Variable (depends on source data)
**Primary Key:** None (summary data)

| Column | Type | Description | Example |
|--------|------|-------------|---------|
| `OEM` | Text | Original Equipment Manufacturer | "Toyota" |
| `Project` | Text | Project name (cleaned) | "BX726 BEV" |
| `First_PPAP_Milestone` | Text | First PPAP milestone | "2024-Q2" |
| `Total_Part_Numbers` | Integer | Total number of parts in project | 1250 |
| `PSW_Available` | Number | PSW availability percentage (0-1) | 0.85 |
| `Drawing_Available` | Number | Drawing availability percentage (0-1) | 0.92 |
| `Managed_By` | Text | Project manager/team | "Engineering Team A" |
| `[Other Columns]` | Various | Additional project-specific columns | Various |

### dim_dates

**Description:** Date dimension table with all unique dates from date columns and derived features.

**Row Count:** Number of unique dates × number of date column roles
**Primary Key:** `date` + `role`

| Column | Type | Description | Example |
|--------|------|-------------|---------|
| `date` | Date | Date value | 2024-01-15 |
| `role` | Text | Source column name for this date | "Approved Date" |
| `year` | Integer | Year component | 2024 |
| `month` | Integer | Month component (1-12) | 1 |
| `day` | Integer | Day component (1-31) | 15 |
| `quarter` | Integer | Quarter component (1-4) | 1 |
| `week` | Integer | ISO week number (1-53) | 3 |
| `weekday` | Integer | Weekday (0=Monday, 6=Sunday) | 0 |
| `month_name` | Text | Full month name | "January" |
| `day_name` | Text | Full day name | "Monday" |

## Data Quality Notes

### Cleaning Applied
1. **ID Standardization**: Alphanumeric only, uppercase, spaces collapsed
2. **Text Normalization**: Title case for names, whitespace trimmed
3. **Date Parsing**: Multiple format support with derived features
4. **Duplicate Removal**: Exact duplicates removed from source data
5. **Type Conversion**: Appropriate data types assigned

### Known Limitations
1. **Date Parsing**: Some date formats may not be recognized
2. **Project Detection**: Relies on column position between ID and Description
3. **Status Logic**: Duplicate detection is simplified
4. **Missing Data**: NULL values preserved where appropriate

### Validation Checks
- Part ID uniqueness in fact_parts
- Status classification completeness
- Date parsing success rates
- Project/plant detection accuracy

## Usage Recommendations

### Power BI Model
1. **Relationships**: Use `part_id_std` as primary relationship key
2. **Date Intelligence**: Connect date columns to `dim_dates[date]`
3. **Hierarchies**: Create project/plant hierarchies from naming conventions
4. **Measures**: Use provided DAX measures for consistent calculations

### Performance Tips
1. **Indexing**: Index on `part_id_std` and `project_plant` columns
2. **Partitioning**: Consider date-based partitioning for large datasets
3. **Aggregations**: Pre-calculate common aggregations
4. **Compression**: Use Parquet format for better compression and performance
